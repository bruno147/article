\section{Experimental Results} \label{sec:Experiments}

	A veil was put over the Five-state FSM from the very beginning of the experimentation phase, which was its great
	dependency towards the transition function. Early superficial assessments of the performance of this first model
	indicated an overcharge concerning this function, which was verified by considerable changes in behaviour derived
	from adjustments in its parameters. For that reason, a second model with less states - the Three-state FSM - was
	designed regarding this characteristic and releasing part of the performance burden from the transition function,
	and the results from the comparison of these architectures are described and analyzed in the succeeding
	subsections.

\subsection{Methodology} \label{subsec:Methodology}

	Once defined the models and which of their parameters required tuning, the genetic algorithm was applied to each
	one separately, in order to adjust their configurations for superior and competitive status. At the same time, the
	goal was to find general and versatile controllers with good results for any track and specific ones that were
	fittest to race in various tracks: road, dirt and oval alike. Therefore, due to the differences observed in the
	parameters of controllers evolved on dirt and road tracks, the evolution process took place separately for those
	two kinds of environments, which produced two contrasting sets of enhanced values for each model.
	
	The \emph{metric} chosen to evaluate the generated controllers was the combined sum of the distance raced by the
	car alone in the first 10.000 game cycles - also called \emph{game tics} - of a list of mixed tracks. This value
	will henceforth be called the \emph{fitness} of the controller, as it was used to determine whether he would
	remain in the evolution process.
	
	The experiments concerning Oval Tracks would repeatedly provide inconclusive results, so they were neglected in
	this evaluation process. Thus, in order to find the best set of parameters for a general track, the two
	finite-state states were evolved in three different sets of tracks, one with 4 Dirt Tracks, one with 4 Road
	Tracks and another with the 4 of each type. The evolution process for each set of tracks consisted on 600
	generations of 30 individuals and culminated in one controller; in other words, at the end of the experiments,
	there were six evolved controllers, one specific for Road Tracks for each model, one specific for Dirt Tracks for
	each model, and also one evolved in a mixed manner for each model. Additionally, as the \emph{Stuck State} is only
	triggered in very specific situations, it was not evolved with the controller and its parameters were hand tuned.
	
	Pursuing an unbiased choice of parameters, the Online Learning module described in Subsection~\ref{subsec:FSM3}
	was turned off during the evolution progress as it seizes the responsibility for the behaviour of the car during
	the race and could interfere with natural selection. The validation then occurred through testing the six produced
	pilots in a predefined set of tracks different from those in which they were evolved, lest they would evidence
	too track-limited parameters. On behalf of comparison, the results from the AUTOPIA controller were incorporated
	in the analysis, since it can be considered the State of the Art, displaying one of the best performances for the
	SCR Championship, and should provide satisfactory basis for appraisal.

	Four road tracks, witch were used in evolution, are selected from the TORCS standard track set. They are \emph{Spring}, 
	the longest track available in torcs with more curves than any other track, \emph{Wheel 2}, the most difficult track 
	with their close and hard curves, \emph{E-Track 3}, a fast track with curves that will get dexterity of the controller, 
	\emph{Forza}, this is a fast track and the pattern of their curves are usually found in others tracks.

	Six road tracks are selected for evaluate the controllers, they are available in TORCS too, were used in 2008 competitions 
	and were used for evaluate the \emph{Autopia} controller (referencia autopia-2009). Ruudskogen, Street-1 and D-Speedway were 
	used at IEEE World Congress on Computational Intelligence; and CG Speedway 1, E-Track3 and B-Speedway were used 
	at Computational Intelligence and Games Symposium. (texto copiado da referencia autopia-2009)

	Four dirt tracks are selected from the TORCS standard track set. They are \emph{Dirt2, Mixed1, Mixed2, Dirt6}. 
	\emph{Dirt2} is a track difficult with close curves, \emph{Mixed1} is a easy track with few curves, \emph{Mixed2} have many 
	curves with medium diffitulty, \emph{Dirt6} is the longest dirt track available with hard curves.
	% the set of tracks was defined by autopia
	% tracks image as in the autopia's article
	% explain warm up stage
	
\subsection{Results} \label{subsec:Results}
	
	\toDo{present table}
	
	\begin{table}[h]
	\renewcommand{\arraystretch}{1.3}
	\caption{Distance covered racing alone for 10,000 game tics}
	\label{tbl:dist covered}
	\centering
	\begin{tabular}{c||c||c||c||c||c||c}
	\hline
	\bfseries Driver & \bfseries Street-1 & \bfseries D-speedway & \bfseries CG-speedway & \bfseries Dirt-1 & \bfseries Dirt-3 & \bfseries Dirt-4 \\ 
	\hline
	\hline FSM3(road) & 7357.06	& 13047.5 & 8974.96 & 4587.12 & 3836.67 & 7020.84 \\
	\hline FSM3(dirt) & 2149.77	& 2450.84 & 1951.93	& 3525.84 & 4905.58 & 5590.78 \\
	\hline FSM3(mixed) & 6704.88 & 8545.64 & 6481.52 & 4854.00 & 5786.40 & 6515.90 \\
	\hline FSM5(road) & 3822.76 & 3427.11 & 4114.66	& 2145.49 &	2205.97 & 3260.19 \\
	\hline FSM5(dirt) & 1267.83 & 2936.82 &	4114.66 & 1072.92 &	2205.82 & 3260.33 \\
	\hline FSM5(mixed) & 3822.99 & 3427.06 & 4114.8 & 2145.75 &	2205.83 & 3260.31 \\
	\hline AUTOPIA & 7091.8 & 15612.3 & 8970.4 & \toDo{?} &\toDo{?} &\toDo{?} \\
	\hline 
	\end{tabular} 
	\end{table}
	
	\toDo{is the fitness graphic among generations appropriate here?}
	
\subsection{Analysis} \label{subsec:Analysis}
	
	%needs review
	In general the three states controller overperformed by far the five states one. FSM3 presented better results in all the tested tracks. One of the causes of this overwhelming difference in performance is the complexity of the transition function. The FSM5 presents a very complex transition that takes in account the sensors variance to decide if the car is in a straight line, approaching the turn or in the turn. On the other hand, the FSM3 has only a single state for handling normal driving situations and it is very easy to say if the controller is inside or outside the track only by checking the track sensor. 
	
	