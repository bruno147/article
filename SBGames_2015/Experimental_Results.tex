\section{Experimental Results} \label{sec:Experiments}

	A veil was put over the Five-state FSM from the very beginning of the experimentation phase, which was its great dependency towards the transition function. Early superficial evaluations of the performance of this first model indicated an overcharge concerning this function, which was verified by considerable changes in behaviour derived from adjustments in its parameters. For that reason, a second model with less states - the Three-state FSM - was designed regarding this characteristic and releasing part of the performance burden from the transition function, and the results from the comparison of these architectures are described and analyzed in the succeeding subsections.

\subsection{Methodology} \label{subsec:Methodology}

	Once the models - and which of their parameters required tuning - had been defined, the genetic algorithm was applied to each approach separately, in order to adjust their configurations for superior and competitive status. At the same time, the goal was to find general and versatile controllers with good results for any track and specific ones that were fittest to race in various tracks: road, dirt and oval alike. Therefore, due to the differences observed in the parameters of controllers evolved on dirt and road tracks, the evolution process took place separately for those two kinds of environments, which produced two contrasting sets of enhanced values for each model.
	
	The \emph{metric} chosen to evaluate the generated controllers was the combined sum of the distance raced by the car alone in the first 10.000 game cycles - also called \emph{game tics} - in a list of mixed tracks. This value will henceforth be called the \emph{fitness} of the controller, as it was used to determine whether he would remain in the evolution process.
	
	The experiments concerning Oval Tracks would repeatedly provide inconclusive results, so they were neglected in this evaluation process. Thus, in order to find the best set of parameters for a general track, the two finite-state states were evolved in three different sets of tracks, one with 4 Dirt Tracks, one with 4 Road Tracks and another with the 4 of each type. The evolution process for each set of tracks consisted on 600 generations of 30 individuals and culminated in one controller; in other words, at the end of the experiments, there were six evolved controllers, one specific for Road Tracks for each model, one specific for Dirt Tracks for each model, and also one evolved in a mixed manner for each model. Additionally, as the \emph{Stuck State} is only triggered in very specific situations, it was not evolved with the controller and its parameters were hand tuned.
	
	Pursuing an unbiased choice of parameters, the Online Learning module described in Subsection~\ref{subsec:FSM3} was turned off during the evolution progress as it seizes the responsibility for the behaviour of the car for itself during the race and could interfere with natural selection. The validation then occurred through testing the six produced pilots in a predefined set of tracks different from those in which they were evolved, avoiding the evidence of too track-limited parameters. On behalf of comparison, the results from the AUTOPIA controller were incorporated in the analysis, since it can be considered the State of the Art, displaying one of the best performances for the SCR Championship, and should provide satisfactory basis for appraisal.

	The four Road Tracks used in the evolution process were chosen from the TORCS standard track set, which are \emph{Spring}, the longest track available on TORCS with more curves than any other track, \emph{Wheel 2}, the most difficult track with sharp and hard curves, \emph{E-Track 3}, a fast track with turns that put to test the dexterity of the controller, and \emph{Forza}, a track considered to be raced fast and whose curve pattern is usually found in others tracks.

	Six Road Tracks were picked to evaluate the controllers, they are also available in TORCS and were used both in the competitions of 2008 and to evaluate the \emph{AUTOPIA} controller~\cite{AUTOPIA2009}. \emph{Ruudskogen}, \emph{Street-1} and \emph{D-Speedway} were used at the \emph{IEEE World Congress on Computational Intelligence}; and \emph{CG Speedway 1}, \emph{E-Track3} and \emph{B-Speedway} were used at the \emph{Computational Intelligence and Games Symposium - CIG}.

	Four Dirt Tracks were selected from the TORCS standard track set, which were \emph{Dirt2}, \emph{Mixed1}, \emph{Mixed2}, \emph{Dirt6}. \emph{Dirt2} is a difficult track with close curves, while \emph{Mixed1} is an easy one with few curves, also, \emph{Mixed2} has many turns with medium difficulty, and \emph{Dirt6} is the longest Dirt Track available, presenting hard curves.
	% the set of tracks was defined by autopia
	% tracks image as in the autopia's article
	% explain warm up stage
	
\subsection{Results} \label{subsec:Results}
	
\toDo{TABLE DOES NOT FIT IN A SINGLE COLUMN!}
	
	\begin{table}[h]
	\renewcommand{\arraystretch}{1.3}
	\caption{Distance covered racing alone for 10,000 game tics}
	\label{tbl:dist covered}
	\centering
	\begin{tabular}{c||c||c||c||c||c||c}
	\hline
	\bfseries Driver & \bfseries Street-1 & \bfseries D-speedway & \bfseries CG-speedway & \bfseries Dirt-1 & \bfseries Dirt-3 & \bfseries Dirt-4 \\ 
	\hline
	\hline FSM3(road) & 7357.06	& 13047.5 & 8974.96 & 4587.12 & 3836.67 & 7020.84 \\
	\hline FSM3(dirt) & 2149.77	& 2450.84 & 1951.93	& 3525.84 & 4905.58 & 5590.78 \\
	\hline FSM3(mixed) & 6704.88 & 8545.64 & 6481.52 & 4854.00 & 5786.40 & 6515.90 \\
	\hline FSM5(road) & 3822.76 & 3427.11 & 4114.66	& 2145.49 &	2205.97 & 3260.19 \\
	\hline FSM5(dirt) & 1267.83 & 2936.82 &	4114.66 & 1072.92 &	2205.82 & 3260.33 \\
	\hline FSM5(mixed) & 3822.99 & 3427.06 & 4114.8 & 2145.75 &	2205.83 & 3260.31 \\
	\hline AUTOPIA & 7091.8 & 15612.3 & 8970.4 & \toDo{?} &\toDo{?} &\toDo{?} \\
	\hline 
	\end{tabular} 
	\end{table}
	
	\toDo{split table in time and ticks table}
	
\subsection{Analysis} \label{subsec:Analysis}
	
	\toDo{review this section and add more details, just throwing ideas}
	%needs review
	In general the three states controller outperformed by far the five states one. FSM3 presented better results in all the tested tracks. One of the causes of this overwhelming difference in performance may be the complexity of the transition function. The FSM5 presents a very complex transition that takes in account the sensors variance to decide if the car is in a straight line, approaching a turn or in a turn. On the other hand, the FSM3 has only a single state for handling normal driving situations and it is very easy to say if the controller is inside or outside the track only by checking the track sensor.
	
	As expected, the controller evolved only in road tracks is the fastest one. This tracks provides an environment susceptible to high speeds since its curves are smoother than the dirt tracks ones, the friction experimented by the car is higher in road tracks allowing it to brake without losing control. As the friction is higher steering is more accurate in road tracks. No critical skidding. Result was an aggressive driver with high base speed.
	
	Dirt tracks provides a more difficult environment for the pilot to fit in. Suddenly brakes result in unwanted behavior more often, skidding is way more common in this situation . The driver evolved here tends to drive in a low speed so it can keep itself inside the boundaries of the track. Speed driving results in high damage and even \toDo{change it please} "death". The result obtained was a very careful driver with a low base speed, and an early brake policy (car starts to brake far before the turn). This passive driving achieved the smallest distance covered both for the FSM3 and FSM5.
	
	\toDo{find better names than "dirt controller", "mixed controller", "road controller"}
	The driver evolved in a mix set of tracks combines characteristics from both. It drives in a considerable speed as the first one, but also has the preventive brake policy from the second one. This behavior achieved better results than the "dirt behavior" in all the tracks tested and outperformed the "road behavior" in all the dirt tracks. \emph{The "mixed controller" performed better than the "dirt controller" even in dirt tracks.} One of the reasons is that the "mixed driver" tries to reach higher speeds even though this means leaving the track in some turns. The time spent trying to get back to the track is compensated by the speed of the car. In addition, the "mixed" is better than the "road" in dirt tracks. The aggressive behavior of the "road driver" makes it take several damage when leaving the track and hitting walls, this results in premature ending of the race (max damage reached).
	
	\toDo{still missing lots of information!}